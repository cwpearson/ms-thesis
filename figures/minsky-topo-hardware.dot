graph G {

    //ratio=fill;
    ranksep=1.5;
    nodesep=0.25;

    subgraph cluster_s0{ label="";
        cpu0 -- gpu0 -- gpu1;
        cpu0 -- gpu1;
        graph[style=dotted];
    }

    subgraph cluster_s1 { label="";
        cpu1 -- gpu2 -- gpu3;
        cpu1 -- gpu3;
        graph[style=dotted];
    }

    cpu0 -- cpu1;
    
    { rank = same; cpu0, cpu1 }
    { rank = same; gpu0, gpu1, gpu2, gpu3 }
}
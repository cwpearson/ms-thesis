\chapter{Unified Memory Performance}
\label{ch:unified-char}

This characterization method outlined in Algorithm~\ref{alg:cuda-d2d} is available for path terminated by CUDA-supported devices on both ends.
A single unified memory allocation is established, and the entire allocation is touched by the source device to ensure the data is resident on that device.
Bandwidth between devices under various access patterns is established by executing a kernel with the corresponding pattern on the destination device.

Applicable Systems
\begin{itemize}
    \item CUDA 9.1 / Power8 / NVLink1 / Pascal
    \item CUDA 9.1 / Power9 / NVLink2 / Volta
    \item x86 / PCIe / Pascal
    \item x86 / PCIe / Kepler
\end{itemize}

Applicable Measures
\begin{itemize}
    \item Coherence vs Prefetch (CPU - GPU)
    \item Coherence vs Prefetch (GPU - CPU)
    \item Coherence vs Prefetch (GPU - GPU)
\end{itemize}



\section{CPU / GPU Transfers}

\begin{figure}[ht]
    \centering
    \begin{subfigure}[b]{0.45\textwidth}
        \includegraphics[width=\textwidth]{figures/generated/m2_um-bw_cpu0-gpu0.pdf}
        \caption{}
        \label{fig:minsky-topo-hardware}
    \end{subfigure}
    ~
    \begin{subfigure}[b]{0.45\textwidth}
        \includegraphics[width=\textwidth]{figures/generated/m2_um-bw_gpu0-cpu0.pdf}
        \caption{}
        \label{fig:minsky-topo-cuda-simple}
    \end{subfigure}
    \caption[\todo{short}]{Minsky, local CPU/GPU coherence and prefetch bandwidth.}
    \label{fig:minsky-hardware-logical}
\end{figure}

\section{GPU / GPU Transfers}

\begin{figure}[ht]
    \centering
    \begin{subfigure}[b]{0.45\textwidth}
        \includegraphics[width=\textwidth]{figures/generated/m2_um-bw_prefetch_gpu-local-remote.pdf}
        \caption{}
        \label{fig:minsky-topo-hardware}
    \end{subfigure}
    ~
    \begin{subfigure}[b]{0.45\textwidth}
        \includegraphics[width=\textwidth]{figures/generated/m2_um-bw_coherence_gpu-local-remote.pdf}
        \caption{}
        \label{fig:minsky-topo-cuda-simple}
    \end{subfigure}
    \caption[\todo{short}]{Minsky, GPU/GPU coherence and prefetch bandwidth}
    \label{fig:minsky-hardware-logical}
\end{figure}


\section{Page Fault Latency}

\begin{itemize}
    \item CUDA 9.1 / Power8 / NVLink1 / Pascal
    \item CUDA 9.1 / Power9 / NVLink2 / Volta
    \item x86 / PCIe / Pascal
    \item x86 / PCIe / Maxwell
\end{itemize}

\begin{itemize}
    \item CPU - GPU
    \item GPU - CPU
    \item GPU - GPU
\end{itemize}